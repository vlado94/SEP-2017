
<div class="row">
	<div class="container">
		<div class="col-sm-6">
			<div class="card">
				<div class="card-header" data-background-color="blue">
					<h4 class="title">Edit Profile</h4>
					<p class="category">Complete your profile</p>
				</div>
				<div class="card-content">

					<form [formGroup]="insurancePolicyCarForm" (ngSubmit)="submitCar()">
						
						<fieldset>
							<legend>Paketi:</legend>
							<div class="paketi">
								<div class="form-group form-black label-floating">
									<label for="slepovanje" class="bmd-label-floating control-label">Šlepovanje do odredjene kilometraže:</label>
									<div class="col-7">
										<select id="slepovanje" class="form-control"
										formControlName="slepovanje">
										<option value=""></option>
										<option *ngFor="let t of slepovanje_list" value="{{t.id}}">{{t.name}}</option>
									</select>
								</div>
							</div>

							<div class="form-group form-black label-floating">
								<label for="popravka" class="bmd-label-floating control-label">Popravka do odredjene cene:</label>
								<select id="popravka" class="form-control" formControlName="popravka">
									<option value=""></option>
									<option *ngFor="let t of popravka_list" value="{{t.id}}">{{t.name}}</option>
								</select>

							</div>

							<div class="form-group form-black label-floating">
								<label for="smestaj" class="bmd-label-floating control-label">Smestaj do odredjenog broja dana:</label>
								<select id="smestaj" class="form-control" formControlName="smestaj">
									<option value=""></option>
									<option *ngFor="let t of smestaj_list" value="{{t.id}}">{{t.name}}</option>
								</select>
							</div>

							<div class="form-group form-black label-floating">
								<label for="prevoz" class="bmd-label-floating control-label">Prevoz do odredjenog broja kilometara:</label>
								<div class="col-7">
									<select id="prevoz" class="form-control" formControlName="prevoz">
										<option value=""></option>
										<option *ngFor="let t of prevoz_list" value="{{t.id}}">{{t.name}}</option>
									</select>
								</div>
							</div>
						</div>
					</fieldset>

					<div class="form-group form-black label-floating">
						<label for="duration" class="control-label">Trajanje osiguranja</label>
						<input id="duration" type="text" class="form-control" formControlName="duration" (blur)="displayDurationErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['duration'].errors && !insurancePolicyCarForm.controls['duration'].pristine && displayDurationErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['duration'].errors.required">Morate	uneti duŽinu trajanja osiguranja.</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['duration'].errors.pattern">Morate uneti ceo broj veci od 0.</span>
						</div>
					</div>

					<div class="form-group form-black label-floating">
						<label class="bmd-label-floating control-label">Tip vozila</label>
						<select id="typeOfVehicle" class="form-control"	formControlName="typeOfVehicle" (blur)="displayTypeOfVehicleErrors=true">
							<option value=""></option>
							<option value="Teretno vozilo">Teretno vozilo</option>
							<option value="Priključno vozilo">Priključno vozilo</option>
							<option value="Putničko vozilo">Putničko vozilo</option>
							<option value="Ostala vozila">Ostala vozila</option>
						</select>
						<div *ngIf="insurancePolicyCarForm.controls['typeOfVehicle'].errors && !insurancePolicyCarForm.controls['typeOfVehicle'].pristine && displayTypeOfVehicleErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['typeOfVehicle'].errors.required">Morate izabrati tip vozila.</span>
						</div>
					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Marka vozila</label>
						<input id="vehicle" type="text" class="form-control" formControlName="vehicle" (blur)="displayVehicleErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['vehicle'].errors && !insurancePolicyCarForm.controls['vehicle'].pristine && displayVehicleErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['vehicle'].errors.required">Morate uneti marku vozila.</span>
						</div>

					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Godište automobila:</label>
						<input id="year" type="text" class="form-control" formControlName="year" (blur)="displayYearErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['year'].errors && !insurancePolicyCarForm.controls['year'].pristine && displayYearErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['year'].errors.required">Morate uneti godiste automobila.</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['year'].errors.pattern">Unesite godiunu(npr. 2016).</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['year'].errors.min">Minimalno godište je 1950.</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['year'].errors.max">Ne postoji to godiŠte.</span>
						</div>

					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Registarska oznaka vozila</label>
						<input id="registrationNumber" type="text" class="form-control" formControlName="registrationNumber" (blur)="displayRegistrationNumberErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['registrationNumber'].errors && !insurancePolicyCarForm.controls['registrationNumber'].pristine && displayRegistrationNumberErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['registrationNumber'].errors.required">Morate uneti broj registarske oznake automobila.</span>
						</div>
					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Broj sasije</label>
						<input id="chassisNumber" type="text" class="form-control" formControlName="chassisNumber" (blur)="displayChassisNumberErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['chassisNumber'].errors && !insurancePolicyCarForm.controls['chassisNumber'].pristine displayChassisNumberErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['chassisNumber'].errors.required">Morate uneti broj sasije.</span>
						</div>

					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Ime vlasnika</label>
						<input id="firstName" type="text" class="form-control" formControlName="firstName" (blur)="displayLastNameErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['firstName'].errors && !insurancePolicyCarForm.controls['firstName'].pristine && displayFirstNameErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['firstName'].errors.required">Morate uneti ime vlasnika.</span>
						</div>

					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">Prezime vlasnika</label>
						<input id="lastName" type="text" class="form-control" formControlName="lastName" (blur)="displayLastNameErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['lastName'].errors && !insurancePolicyCarForm.controls['lastName'].pristine && displayLastNameErrors">

							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['lastName'].errors.required">Morate uneti prezime vlasnika.</span>
						</div>

					</div>

					<div class="form-group form-black label-floating">
						<label class="control-label">JMBG vlasnika</label>
						<input id="personNo" type="text" class="form-control" formControlName="personNo" (blur)="displayPersonNoErrors=true">
						<div *ngIf="insurancePolicyCarForm.controls['personNo'].errors && !insurancePolicyCarForm.controls['personNo'].pristine && displayPersonNoErrors">
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['personNo'].errors.required">Morate uneti jedinstveni matični broj.</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['personNo'].errors.minlength">Jedinstveni matični broj sadrži 13 cifara.</span>
							<span class="errorClass" *ngIf="insurancePolicyCarForm.controls['personNo'].errors.maxlength">Jedinstveni matični broj sadrži 13 cifara.</span>
						</div>
					</div>

					<div class="price" *ngIf="price">
						<div *ngIf="price">
							<div *ngIf="price.discounts.length > 0">
								<p>Osnovna cena : {{price.basePrice}} din</p>
								<p>Popusti:</p>
								<p *ngFor="let discount of price.discounts">
									{{discount.discountName}} : {{discount.amount}} din ({{discount.percent}}%)
								</p>
							</div>
							Trenutna cena osiguranja iznosi : <span class="price-number">{{price.finalPrice}} din</span>
						</div>
					</div>

					<div class="pull-right button" >
						<button class="btn btn-default" type="submit" [disabled]="!insurancePolicyCarForm.valid || !paket_selected">Potvrdi</button>
					</div>
					<div class="pull-right button">
						<button class="btn btn-default" (click)="closeForm()">Zatvori</button>
					</div>
					<div class="pull-right button" [hidden]="!currentCar">
						<button class="btn btn-default" (click)="cancelCar()">Otkazite osiguranje automobila</button>
					</div>


				</form>
			</div>
		</div>
	</div>
</div>
</div>

